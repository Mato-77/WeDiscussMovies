<div xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
    <div style="width: 85%; text-align: justify; margin: auto; clear: both">
        <div style="background-color: rgba(128,128,128, 0.2); border-radius: 20px; padding: 20px">
            <h1 th:text="${disc.getTitle()}" style="width: 80%; display: inline; height: fit-content; clear: both"></h1>
        </div>
        <hr>
        <div>
            <h5 th:text="${disc.getText()}" style="width: 90%; margin: auto; background-color: lightblue; border-radius: 4px; padding: 20px"></h5>
        </div>
        <br>
        <h4>
            <span th:if="${!disc.getUser().equals(user)}" sec:authorize="isAuthenticated()">
                <a class='btn btn-success button-like-discussion' th:if="${!likedDiscussions.contains(disc)}" th:discussion-id="${disc.getDiscussionId()}" th:user-id="${user.getUserId()}" >‚ù§</a>
                <a class='btn btn-danger button-unlike-discussion' th:if="${likedDiscussions.contains(disc)}" th:discussion-id="${disc.getDiscussionId()}" th:user-id="${user.getUserId()}" >üíî</a>
            </span>
            <span>–ë—Ä–æ—ò –Ω–∞ –¥–æ–ø–∞—ì–∞—ö–∞:</span>
            <span th:text="${disc.getLikes()}" id="likes_count"></span>
        </h4>
        <br>
        <h6 style="width: 60%; float:left;">
            <a th:href="@{'/profiles/{id}' (id=${disc.getUser().getUserId()})}" >
            <span th:text="${'–ü–æ—Å—Ç–∞–≤–µ–Ω–æ –æ–¥: '+disc.getUser().getUsername()}"></span>
            </a>
            <span th:text="${', –Ω–∞ –¥–∞—Ç—É–º '+ disc.getDate()}"></span>
            <br>
            <span>–ü–æ—Å—Ç–∞–≤–µ–Ω–æ –∑–∞ </span>
            <span th:text="${disc.getMovie() != null ? '–§–∏–ª–º–æ—Ç ' + disc.getMovie().getTitle() : '–ê–∫—Ç–µ—Ä–æ—Ç ' + disc.getPerson().getName() + ' ' + disc.getPerson().getSurname()}" ></span>
        </h6>
        <div style="float: right"  sec:authorize="isAuthenticated()">
            <a th:if="${disc.getUser().equals(user)}" class="btn btn-warning" th:href="@{'/discussions/add/{id}' (id=${disc.getDiscussionId()})}">–ü—Ä–æ–º–µ–Ω–∏</a>
            <a th:if="${disc.getUser().equals(user)}" class="btn btn-danger button-delete-discussion" th:discussion-id="${disc.getDiscussionId()}">–ò–∑–±—Ä–∏—à–∏</a>
            <a class="btn btn-success" th:href="@{'/replies/add/{discussionId}' (discussionId=${disc.getDiscussionId()})}">–†–µ–ø–ª–∏—Ü–∏—Ä–∞—ò</a>

        </div><br>
    </div>
    <table class="table table-striped" style="width: 70%; margin: auto;">
        <thead>
        <tr>
            <th scope="col">–†–µ–ø–ª–∏–∫–∞</th>
            <th scope="col">–ü–æ—Å—Ç–∞–≤–µ–Ω–∞ –Ω–∞</th>
            <th scope="col">–ü–æ—Å—Ç–∞–≤–µ–Ω–∞ –æ–¥</th>
            <th:block  sec:authorize="isAuthenticated()">
                <th scope="col"></th>
                <th scope="col"></th>
            </th:block>
        </tr>
        </thead>
        <tbody>
        <tr th:each="reply : ${replies}" class="movie">
            <td th:text="${reply.getText()}"></td>
            <td th:text="${reply.getDate()}"></td>
            <td >
                <a th:href="@{'/profiles/{id}' (id=${reply.getUser().getUserId()})}" th:text="${reply.getUser().getUsername()}"></a>
            </td>
            <td th:if="${reply.getUser().equals(user)}"><a class="btn btn-warning" th:href="@{'/replies/edit/{discussionId}/{replyId}' (discussionId=${disc.getDiscussionId()},replyId=${reply.getReplyId()})}">–ü—Ä–æ–º–µ–Ω–∏</a> </td>
            <td th:if="${reply.getUser().equals(user)}"><a class="btn btn-danger button-delete-reply" th:reply-id="${reply.getReplyId()}" th:dicsussion-id="${disc.getDiscussionId()}">–ò–∑–±—Ä–∏—à–∏</a> </td>
            <th:block sec:authorize="isAuthenticated()">
                <td th:if="${!reply.getUser().equals(user)}">
                    <a class="btn btn-success button-like-reply" th:discussionId="${reply.getDiscussionId()}" th:reply-id="${reply.getReplyId()}" th:user-id="${user.getUserId()}" th:if="${!likedReplies.contains(reply.getKey())}">üëç</a>
                    <a class="btn btn-danger button-unlike-reply" th:discussionId="${reply.getDiscussionId()}" th:reply-id="${reply.getReplyId()}" th:user-id="${user.getUserId()}" th:if="${likedReplies.contains(reply.getKey())}">üëé</a>
                </td>
            </th:block>
        </tr>
        </tbody>
    </table>
</div>